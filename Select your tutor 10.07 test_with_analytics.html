<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Тест - Вибір викладача</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px 30px;
            text-align: center;
            position: relative;
        }
        
        .admin-btn {
            position: absolute;
            top: 15px;
            right: 15px;
            background: rgba(255,255,255,0.2);
            color: white;
            border: 1px solid rgba(255,255,255,0.3);
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .admin-btn:hover {
            background: rgba(255,255,255,0.3);
        }
        
        .logo {
            width: 80px;
            height: 80px;
            margin: 0 auto 20px;
            background: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: #667eea;
            font-size: 24px;
        }
        
        .header h1 {
            font-size: 28px;
            margin-bottom: 10px;
        }
        
        .progress {
            margin-top: 20px;
            text-align: center;
        }
        
        .progress-text {
            margin-bottom: 10px;
            font-size: 16px;
        }
        
        .progress-bar {
            width: 100%;
            height: 8px;
            background: rgba(255,255,255,0.3);
            border-radius: 4px;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: white;
            transition: width 0.3s ease;
            border-radius: 4px;
        }
        
        .content {
            padding: 40px;
        }
        
        .question {
            display: none;
        }
        
        .question.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .question h2 {
            font-size: 24px;
            color: #333;
            margin-bottom: 30px;
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .question-number {
            background: #667eea;
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }
        
        .options {
            display: grid;
            gap: 15px;
        }
        
        .option {
            background: #f8f9fa;
            border: 2px solid #e9ecef;
            border-radius: 12px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .option:hover {
            background: #e3f2fd;
            border-color: #667eea;
            transform: translateY(-2px);
        }
        
        .option.selected {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }
        
        .option-icon {
            font-size: 24px;
            min-width: 30px;
        }
        
        .option-text {
            flex: 1;
        }
        
        .option-title {
            font-weight: 600;
            font-size: 16px;
            margin-bottom: 5px;
        }
        
        .option-desc {
            font-size: 14px;
            opacity: 0.8;
        }
        
        .navigation {
            display: flex;
            justify-content: space-between;
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid #eee;
        }
        
        .btn {
            padding: 12px 30px;
            border: none;
            border-radius: 25px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .btn-primary {
            background: #667eea;
            color: white;
        }
        
        .btn-primary:hover:not(:disabled) {
            background: #5a67d8;
            transform: translateY(-2px);
        }
        
        .btn-secondary {
            background: #f8f9fa;
            color: #666;
            border: 1px solid #ddd;
        }
        
        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        .result {
            display: none;
            text-align: center;
            padding: 40px;
        }
        
        .result-icon {
            font-size: 80px;
            margin-bottom: 20px;
        }
        
        .result h2 {
            font-size: 32px;
            color: #333;
            margin-bottom: 10px;
        }
        
        .result h3 {
            font-size: 20px;
            color: #667eea;
            margin-bottom: 20px;
        }
        
        .result-desc {
            font-size: 16px;
            line-height: 1.6;
            color: #666;
            margin-bottom: 30px;
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            text-align: left;
        }
        
        .features {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 30px;
        }
        
        .feature {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        /* Аналітика */
        .analytics {
            display: none;
            padding: 40px;
            background: #f8f9fa;
        }
        
        .analytics h2 {
            color: #333;
            margin-bottom: 30px;
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .stat-card {
            background: white;
            padding: 25px;
            border-radius: 12px;
            text-align: center;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        
        .stat-number {
            font-size: 36px;
            font-weight: 800;
            color: #667eea;
            margin-bottom: 5px;
        }
        
        .stat-label {
            font-size: 14px;
            color: #64748b;
            font-weight: 600;
        }
        
        .results-breakdown {
            background: white;
            padding: 25px;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        
        .breakdown-title {
            font-size: 18px;
            font-weight: 700;
            color: #1e293b;
            margin-bottom: 20px;
        }
        
        .breakdown-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 0;
            border-bottom: 1px solid #e2e8f0;
        }
        
        .breakdown-item:last-child {
            border-bottom: none;
        }
        
        .breakdown-bar {
            width: 100px;
            height: 6px;
            background: #e2e8f0;
            border-radius: 3px;
            overflow: hidden;
            margin-left: 15px;
        }
        
        .breakdown-fill {
            height: 100%;
            background: #667eea;
            transition: width 0.3s ease;
        }
        
        .export-buttons {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }
        
        .btn-export {
            background: #10b981;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
        }
        
        .btn-export:hover {
            background: #059669;
        }
        
        @media (max-width: 768px) {
            .content { padding: 20px; }
            .question h2 { font-size: 20px; }
            .option { padding: 15px; }
            .navigation { flex-direction: column; gap: 10px; }
            .btn { width: 100%; }
            .admin-btn { position: static; margin-bottom: 15px; }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <button class="admin-btn" onclick="toggleAnalytics()">📊 Аналітика</button>
            <div class="logo">📚</div>
            <h1>🎯 Вибір викладача</h1>
            <p>Дізнайтесь, який формат навчання підходить саме вам</p>
            <div class="progress">
                <div class="progress-text">Питання <span id="current">1</span> з 5</div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressBar" style="width: 20%"></div>
                </div>
            </div>
        </div>
        
        <div class="content">
            <!-- Питання 1 -->
            <div class="question active" id="q1">
                <h2><span class="question-number">1</span>⏰ Коли вам зручніше вчитися?</h2>
                <div class="options">
                    <div class="option" onclick="selectAnswer('q1', 'human-flexible', this)">
                        <span class="option-icon">👨‍🏫</span>
                        <div class="option-text">
                            <div class="option-title">У зручний час з викладачем</div>
                            <div class="option-desc">Гнучкий розклад, індивідуальний підхід</div>
                        </div>
                    </div>
                    <div class="option" onclick="selectAnswer('q1', 'human-fixed', this)">
                        <span class="option-icon">📅</span>
                        <div class="option-text">
                            <div class="option-title">Фіксований розклад з викладачем</div>
                            <div class="option-desc">Регулярні заняття, дисципліна</div>
                        </div>
                    </div>
                    <div class="option" onclick="selectAnswer('q1', 'ai-anytime', this)">
                        <span class="option-icon">🤖</span>
                        <div class="option-text">
                            <div class="option-title">24/7 з онлайн-платформою</div>
                            <div class="option-desc">Завжди доступний, миттєві відповіді</div>
                        </div>
                    </div>
                    <div class="option" onclick="selectAnswer('q1', 'self-paced', this)">
                        <span class="option-icon">🎓</span>
                        <div class="option-text">
                            <div class="option-title">У своєму темпі з курсом</div>
                            <div class="option-desc">Самостійне вивчення</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Питання 2 -->
            <div class="question" id="q2">
                <h2><span class="question-number">2</span>🧠 Як ви краще засвоюєте матеріал?</h2>
                <div class="options">
                    <div class="option" onclick="selectAnswer('q2', 'human-interaction', this)">
                        <span class="option-icon">💬</span>
                        <div class="option-text">
                            <div class="option-title">Через спілкування з людиною</div>
                            <div class="option-desc">Живі діалоги, емоційний контакт</div>
                        </div>
                    </div>
                    <div class="option" onclick="selectAnswer('q2', 'ai-interaction', this)">
                        <span class="option-icon">⚡</span>
                        <div class="option-text">
                            <div class="option-title">Через цифрові інструменти</div>
                            <div class="option-desc">Швидкі відповіді, адаптивність</div>
                        </div>
                    </div>
                    <div class="option" onclick="selectAnswer('q2', 'structured-content', this)">
                        <span class="option-icon">📚</span>
                        <div class="option-text">
                            <div class="option-title">Через структурований контент</div>
                            <div class="option-desc">Логічна послідовність</div>
                        </div>
                    </div>
                    <div class="option" onclick="selectAnswer('q2', 'visual-audio', this)">
                        <span class="option-icon">🎥</span>
                        <div class="option-text">
                            <div class="option-title">Через відео та аудіо</div>
                            <div class="option-desc">Візуальне сприйняття</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Питання 3 -->
            <div class="question" id="q3">
                <h2><span class="question-number">3</span>⭐ Що найважливіше у навчанні?</h2>
                <div class="options">
                    <div class="option" onclick="selectAnswer('q3', 'personal-support', this)">
                        <span class="option-icon">🤝</span>
                        <div class="option-text">
                            <div class="option-title">Особиста підтримка</div>
                            <div class="option-desc">Мотивація від викладача</div>
                        </div>
                    </div>
                    <div class="option" onclick="selectAnswer('q3', 'instant-feedback', this)">
                        <span class="option-icon">⚡</span>
                        <div class="option-text">
                            <div class="option-title">Миттєвий зворотний зв'язок</div>
                            <div class="option-desc">Швидка корекція</div>
                        </div>
                    </div>
                    <div class="option" onclick="selectAnswer('q3', 'self-control', this)">
                        <span class="option-icon">🎮</span>
                        <div class="option-text">
                            <div class="option-title">Контроль процесу</div>
                            <div class="option-desc">Власний темп</div>
                        </div>
                    </div>
                    <div class="option" onclick="selectAnswer('q3', 'expertise', this)">
                        <span class="option-icon">🏆</span>
                        <div class="option-text">
                            <div class="option-title">Професійна експертиза</div>
                            <div class="option-desc">Високий рівень знань</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Питання 4 -->
            <div class="question" id="q4">
                <h2><span class="question-number">4</span>💰 Підхід до витрат?</h2>
                <div class="options">
                    <div class="option" onclick="selectAnswer('q4', 'premium-human', this)">
                        <span class="option-icon">💎</span>
                        <div class="option-text">
                            <div class="option-title">Готовий платити за якість</div>
                            <div class="option-desc">Преміум-сервіс</div>
                        </div>
                    </div>
                    <div class="option" onclick="selectAnswer('q4', 'moderate-ai', this)">
                        <span class="option-icon">⚖️</span>
                        <div class="option-text">
                            <div class="option-title">Баланс ціни та якості</div>
                            <div class="option-desc">Оптимальне співвідношення</div>
                        </div>
                    </div>
                    <div class="option" onclick="selectAnswer('q4', 'budget-course', this)">
                        <span class="option-icon">💰</span>
                        <div class="option-text">
                            <div class="option-title">Економічний варіант</div>
                            <div class="option-desc">Доступна ціна</div>
                        </div>
                    </div>
                    <div class="option" onclick="selectAnswer('q4', 'flexible-payment', this)">
                        <span class="option-icon">🔄</span>
                        <div class="option-text">
                            <div class="option-title">Гнучка оплата</div>
                            <div class="option-desc">Адаптивні тарифи</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Питання 5 -->
            <div class="question" id="q5">
                <h2><span class="question-number">5</span>🔄 Ставлення до помилок?</h2>
                <div class="options">
                    <div class="option" onclick="selectAnswer('q5', 'human-correction', this)">
                        <span class="option-icon">🤗</span>
                        <div class="option-text">
                            <div class="option-title">Делікатна корекція людини</div>
                            <div class="option-desc">Тактовно, з розумінням</div>
                        </div>
                    </div>
                    <div class="option" onclick="selectAnswer('q5', 'ai-correction', this)">
                        <span class="option-icon">🎯</span>
                        <div class="option-text">
                            <div class="option-title">Точна корекція без емоцій</div>
                            <div class="option-desc">Об'єктивно, факти</div>
                        </div>
                    </div>
                    <div class="option" onclick="selectAnswer('q5', 'self-correction', this)">
                        <span class="option-icon">🔍</span>
                        <div class="option-text">
                            <div class="option-title">Самоконтроль з підказками</div>
                            <div class="option-desc">Власний аналіз</div>
                        </div>
                    </div>
                    <div class="option" onclick="selectAnswer('q5', 'no-pressure', this)">
                        <span class="option-icon">😌</span>
                        <div class="option-text">
                            <div class="option-title">Навчання без тиску</div>
                            <div class="option-desc">Спокійно, без стресу</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Результат -->
            <div class="result" id="result">
                <div class="result-icon" id="resultIcon">🎯</div>
                <h2 id="resultTitle">Ваш ідеальний вибір</h2>
                <h3 id="resultSubtitle">Живий викладач</h3>
                <div class="result-desc" id="resultDesc">
                    Опис результату...
                </div>
                <div class="features" id="resultFeatures">
                    <!-- Features будуть додані через JS -->
                </div>
                <div class="navigation">
                    <button class="btn btn-primary" onclick="restartTest()">🔄 Пройти знову</button>
                </div>
            </div>
            
            <!-- Навігація -->
            <div class="navigation" id="navigation">
                <button class="btn btn-secondary" id="prevBtn" onclick="prevQuestion()" style="display:none">← Назад</button>
                <button class="btn btn-primary" id="nextBtn" onclick="nextQuestion()" disabled>Далі →</button>
                <button class="btn btn-primary" id="submitBtn" onclick="showResult()" style="display:none" disabled>Отримати результат 🎯</button>
            </div>
        </div>
        
        <!-- Аналітика -->
        <div class="analytics" id="analytics">
            <h2>📊 Аналітика тесту</h2>
            
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-number" id="totalCompletions">0</div>
                    <div class="stat-label">Загальна кількість</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="todayCompletions">0</div>
                    <div class="stat-label">Сьогодні</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="averageTime">0с</div>
                    <div class="stat-label">Середній час</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="completionRate">100%</div>
                    <div class="stat-label">Успішність</div>
                </div>
            </div>
            
            <div class="results-breakdown">
                <h3 class="breakdown-title">Розподіл результатів</h3>
                <div id="breakdownList">
                    <!-- Буде заповнено через JS -->
                </div>
            </div>
            
            <div class="export-buttons">
                <button class="btn-export" onclick="exportToCSV()">📄 Експорт CSV</button>
                <button class="btn-export" onclick="exportToJSON()">📋 Експорт JSON</button>
                <button class="btn-export" onclick="clearData()" style="background: #ef4444;">🗑️ Очистити дані</button>
            </div>
            
            <div class="navigation">
                <button class="btn btn-secondary" onclick="toggleAnalytics()">← Повернутися до тесту</button>
            </div>
        </div>
    </div>

    <script>
        let currentQ = 1;
        let answers = {};
        let startTime = Date.now();
        let analyticsVisible = false;
        
        const teacherTypes = {
            'live-human': {
                icon: '👨‍🏫',
                title: 'Живий викладач',
                subtitle: 'Персональний підхід і людське спілкування',
                description: 'Вам підходить навчання з досвідченим викладачем, який адаптується до ваших потреб і надає особисту підтримку. Ви цінуєте живе спілкування та емоційний контакт.',
                features: [
                    { icon: '🎯', text: 'Персональний підхід' },
                    { icon: '💬', text: 'Живе спілкування' },
                    { icon: '🤝', text: 'Емоційна підтримка' },
                    { icon: '⏰', text: 'Гнучкий розклад' }
                ]
            },
            'ai-tutor': {
                icon: '🤖',
                title: 'Цифрова платформа',
                subtitle: 'Сучасні технології навчання',
                description: 'Вам підходить навчання з використанням сучасних цифрових інструментів, які доступні 24/7 і надають миттєвий зворотний зв\'язок.',
                features: [
                    { icon: '⚡', text: 'Миттєві відповіді' },
                    { icon: '🕐', text: 'Доступність 24/7' },
                    { icon: '🎯', text: 'Точна корекція' },
                    { icon: '💰', text: 'Оптимальна ціна' }
                ]
            },
            'structured-course': {
                icon: '📚',
                title: 'Структурований курс',
                subtitle: 'Самостійне навчання за системою',
                description: 'Вам підходить самостійне навчання за структурованою програмою у власному темпі. Ви цінуєте можливість повного контролю над процесом.',
                features: [
                    { icon: '📋', text: 'Чітка структура' },
                    { icon: '⏱️', text: 'Власний темп' },
                    { icon: '💰', text: 'Економічно' },
                    { icon: '🎮', text: 'Повний контроль' }
                ]
            },
            'hybrid-approach': {
                icon: '🔄',
                title: 'Гібридний підхід',
                subtitle: 'Комбінація всіх форматів',
                description: 'Вам підходить комбінований підхід, який поєднує переваги живого спілкування, цифрових технологій та самостійного навчання.',
                features: [
                    { icon: '🔄', text: 'Гнучкий формат' },
                    { icon: '🎯', text: 'Максимум можливостей' },
                    { icon: '⚖️', text: 'Баланс підходів' },
                    { icon: '🚀', text: 'Швидкий прогрес' }
                ]
            }
        };
        
        // АНАЛІТИКА
        function saveTestResult(resultType, timeTaken) {
            let analytics = JSON.parse(localStorage.getItem('testAnalytics') || '{}');
            
            if (!analytics.results) analytics.results = [];
            if (!analytics.counts) analytics.counts = {};
            if (!analytics.sessions) analytics.sessions = 0;
            
            const result = {
                id: Date.now(),
                result: resultType,
                time: timeTaken,
                date: new Date().toISOString(),
                answers: {...answers},
                userAgent: navigator.userAgent,
                timestamp: Date.now()
            };
            
            analytics.results.push(result);
            analytics.counts[resultType] = (analytics.counts[resultType] || 0) + 1;
            analytics.sessions++;
            analytics.lastUpdate = new Date().toISOString();
            
            localStorage.setItem('testAnalytics', JSON.stringify(analytics));
            console.log('✅ Результат збережено:', result);
        }
        
        function getAnalytics() {
            return JSON.parse(localStorage.getItem('testAnalytics') || '{}');
        }
        
        function updateAnalyticsDisplay() {
            const analytics = getAnalytics();
            const results = analytics.results || [];
            const counts = analytics.counts || {};
            
            // Загальна статистика
            document.getElementById('totalCompletions').textContent = results.length;
            
            // Сьогоднішні результати
            const today = new Date().toDateString();
            const todayResults = results.filter(r => new Date(r.date).toDateString() === today);
            document.getElementById('todayCompletions').textContent = todayResults.length;
            
            // Середній час
            const avgTime = results.length > 0 ? 
                Math.round(results.reduce((sum, r) => sum + r.time, 0) / results.length) : 0;
            document.getElementById('averageTime').textContent = avgTime + 'с';
            
            // Успішність (всі тести завершені)
            document.getElementById('completionRate').textContent = '100%';
            
            // Розподіл результатів
            const breakdownList = document.getElementById('breakdownList');
            breakdownList.innerHTML = '';
            
            const total = results.length;
            Object.entries(teacherTypes).forEach(([key, type]) => {
                const count = counts[key] || 0;
                const percentage = total > 0 ? Math.round((count / total) * 100) : 0;
                
                const item = document.createElement('div');
                item.className = 'breakdown-item';
                item.innerHTML = `
                    <span>${type.icon} ${type.title}</span>
                    <span>${count} (${percentage}%)</span>
                    <div class="breakdown-bar">
                        <div class="breakdown-fill" style="width: ${percentage}%"></div>
                    </div>
                `;
                breakdownList.appendChild(item);
            });
        }
        
        function toggleAnalytics() {
            analyticsVisible = !analyticsVisible;
            
            if (analyticsVisible) {
                document.querySelector('.content').style.display = 'none';
                document.getElementById('analytics').style.display = 'block';
                updateAnalyticsDisplay();
            } else {
                document.querySelector('.content').style.display = 'block';
                document.getElementById('analytics').style.display = 'none';
            }
        }
        
        function exportToCSV() {
            const analytics = getAnalytics();
            const results = analytics.results || [];
            
            let csv = 'ID,Дата,Результат,Час(сек),Q1,Q2,Q3,Q4,Q5\n';
            
            results.forEach(result => {
                const date = new Date(result.date).toLocaleString('uk-UA');
                const answers = result.answers;
                csv += `${result.id},"${date}","${result.result}",${result.time},"${answers.q1 || ''}","${answers.q2 || ''}","${answers.q3 || ''}","${answers.q4 || ''}","${answers.q5 || ''}"\n`;
            });
            
            downloadFile(csv, 'test-analytics.csv', 'text/csv');
        }
        
        function exportToJSON() {
            const analytics = getAnalytics();
            const json = JSON.stringify(analytics, null, 2);
            downloadFile(json, 'test-analytics.json', 'application/json');
        }
        
        function downloadFile(content, filename, mimeType) {
            const blob = new Blob([content], { type: mimeType });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = filename;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }
        
        function clearData() {
            if (confirm('Ви впевнені, що хочете видалити всі дані аналітики?')) {
                localStorage.removeItem('testAnalytics');
                updateAnalyticsDisplay();
                alert('Дані очищено!');
            }
        }
        
        // ОСНОВНИЙ ФУНКЦІОНАЛ ТЕСТУ
        function selectAnswer(question, answer, element) {
            answers[question] = answer;
            
            element.parentNode.querySelectorAll('.option').forEach(opt => {
                opt.classList.remove('selected');
            });
            
            element.classList.add('selected');
            updateButtons();
            
            setTimeout(() => {
                if (currentQ < 5) {
                    nextQuestion();
                }
            }, 1000);
        }
        
        function nextQuestion() {
            if (currentQ < 5) {
                document.getElementById(`q${currentQ}`).classList.remove('active');
                currentQ++;
                document.getElementById(`q${currentQ}`).classList.add('active');
                updateProgress();
                updateButtons();
            }
        }
        
        function prevQuestion() {
            if (currentQ > 1) {
                document.getElementById(`q${currentQ}`).classList.remove('active');
                currentQ--;
                document.getElementById(`q${currentQ}`).classList.add('active');
                updateProgress();
                updateButtons();
            }
        }
        
        function updateProgress() {
            const progress = (currentQ / 5) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('current').textContent = currentQ;
        }
        
        function updateButtons() {
            const prevBtn = document.getElementById('prevBtn');
            const nextBtn = document.getElementById('nextBtn');
            const submitBtn = document.getElementById('submitBtn');
            
            prevBtn.style.display = currentQ > 1 ? 'block' : 'none';
            
            const hasAnswer = answers[`q${currentQ}`];
            
            if (currentQ === 5) {
                nextBtn.style.display = 'none';
                submitBtn.style.display = 'block';
                submitBtn.disabled = !hasAnswer;
            } else {
                nextBtn.style.display = 'block';
                submitBtn.style.display = 'none';
                nextBtn.disabled = !hasAnswer;
            }
        }
        
        function calculateResult() {
            const scores = {
                'live-human': 0,
                'ai-tutor': 0,
                'structured-course': 0,
                'hybrid-approach': 0
            };
            
            if (answers.q1 === 'human-flexible' || answers.q1 === 'human-fixed') scores['live-human'] += 2;
            if (answers.q1 === 'ai-anytime') scores['ai-tutor'] += 2;
            if (answers.q1 === 'self-paced') scores['structured-course'] += 2;
            
            if (answers.q2 === 'human-interaction') scores['live-human'] += 2;
            if (answers.q2 === 'ai-interaction') scores['ai-tutor'] += 2;
            if (answers.q2 === 'structured-content') scores['structured-course'] += 2;
            if (answers.q2 === 'visual-audio') { scores['hybrid-approach'] += 1; scores['structured-course'] += 1; }
            
            if (answers.q3 === 'personal-support') scores['live-human'] += 2;
            if (answers.q3 === 'instant-feedback') scores['ai-tutor'] += 2;
            if (answers.q3 === 'self-control') scores['structured-course'] += 2;
            if (answers.q3 === 'expertise') { scores['live-human'] += 1; scores['hybrid-approach'] += 1; }
            
            if (answers.q4 === 'premium-human') scores['live-human'] += 2;
            if (answers.q4 === 'moderate-ai') scores['ai-tutor'] += 2;
            if (answers.q4 === 'budget-course') scores['structured-course'] += 2;
            if (answers.q4 === 'flexible-payment') scores['hybrid-approach'] += 2;
            
            if (answers.q5 === 'human-correction') scores['live-human'] += 2;
            if (answers.q5 === 'ai-correction') scores['ai-tutor'] += 2;
            if (answers.q5 === 'self-correction') scores['structured-course'] += 2;
            if (answers.q5 === 'no-pressure') { scores['hybrid-approach'] += 1; scores['structured-course'] += 1; }
            
            let maxScore = 0;
            let resultType = 'live-human';
            
            for (const [type, score] of Object.entries(scores)) {
                if (score > maxScore) {
                    maxScore = score;
                    resultType = type;
                }
            }
            
            return resultType;
        }
        
        function showResult() {
            const resultType = calculateResult();
            const result = teacherTypes[resultType];
            const timeTaken = Math.round((Date.now() - startTime) / 1000);
            
            // ЗБЕРІГАЄМО РЕЗУЛЬТАТ В АНАЛІТИКУ
            saveTestResult(resultType, timeTaken);
            
            document.getElementById(`q${currentQ}`).style.display = 'none';
            document.getElementById('navigation').style.display = 'none';
            
            document.getElementById('result').style.display = 'block';
            document.getElementById('resultIcon').textContent = result.icon;
            document.getElementById('resultTitle').textContent = result.title;
            document.getElementById('resultSubtitle').textContent = result.subtitle;
            document.getElementById('resultDesc').textContent = result.description;
            
            const featuresContainer = document.getElementById('resultFeatures');
            featuresContainer.innerHTML = '';
            result.features.forEach(feature => {
                const featureDiv = document.createElement('div');
                featureDiv.className = 'feature';
                featureDiv.innerHTML = `<span>${feature.icon}</span><span>${feature.text}</span>`;
                featuresContainer.appendChild(featureDiv);
            });
        }
        
        function restartTest() {
            currentQ = 1;
            answers = {};
            startTime = Date.now();
            
            document.getElementById('result').style.display = 'none';
            document.getElementById('navigation').style.display = 'flex';
            
            document.querySelectorAll('.question').forEach(q => q.classList.remove('active'));
            document.getElementById('q1').classList.add('active');
            
            document.querySelectorAll('.option').forEach(opt => opt.classList.remove('selected'));
            
            updateProgress();
            updateButtons();
        }
        
        // Ініціалізація
        updateProgress();
        updateButtons();
        
        // Трекінг початку тесту
        function trackTestStart() {
            let analytics = getAnalytics();
            analytics.totalStarted = (analytics.totalStarted || 0) + 1;
            localStorage.setItem('testAnalytics', JSON.stringify(analytics));
        }
        
        // Запускаємо трекінг при завантаженні
        trackTestStart();
    </script>
</body>
</html>